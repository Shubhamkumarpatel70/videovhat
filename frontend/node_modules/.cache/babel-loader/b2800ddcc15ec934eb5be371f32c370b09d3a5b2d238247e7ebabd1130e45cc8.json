{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useRef, useEffect, useState, useCallback } from 'react';\nimport io from 'socket.io-client';\nconst useWebRTC = (roomId, user) => {\n  _s();\n  const [peers, setPeers] = useState({});\n  const [localStream, setLocalStream] = useState(null);\n  const [remoteStreams, setRemoteStreams] = useState({});\n  const [callEnded, setCallEnded] = useState(false);\n  const socketRef = useRef();\n  const peerConnections = useRef({});\n  const dataChannels = useRef({});\n  useEffect(() => {\n    socketRef.current = io('http://localhost:5000'); // Replace with your signaling server URL\n\n    navigator.mediaDevices.getUserMedia({\n      video: true,\n      audio: true\n    }).then(stream => {\n      setLocalStream(stream);\n      // Emit user-join instead of join-room to match server\n      socketRef.current.emit('user-join', {\n        roomId,\n        user\n      });\n    }).catch(error => {\n      console.error('Error accessing media devices.', error);\n    });\n\n    // Listen for match-found instead of all-users\n    socketRef.current.on('match-found', data => {\n      var _data$matchedUser, _data$matchedUser2;\n      // When match is found, create peer connection for the matched user\n      const matchedUserId = ((_data$matchedUser = data.matchedUser) === null || _data$matchedUser === void 0 ? void 0 : _data$matchedUser.id) || ((_data$matchedUser2 = data.matchedUser) === null || _data$matchedUser2 === void 0 ? void 0 : _data$matchedUser2.socketId);\n      if (matchedUserId) {\n        const pc = createPeerConnection(matchedUserId);\n        peerConnections.current[matchedUserId] = pc;\n        const dc = pc.createDataChannel('chat');\n        dataChannels.current[matchedUserId] = dc;\n        setupDataChannel(dc);\n      }\n    });\n\n    // Listen for skip-matched (when user skips and gets a new match)\n    socketRef.current.on('skip-matched', data => {\n      var _data$matchedUser3, _data$matchedUser4;\n      // When skip match is found, create peer connection for the new matched user\n      const matchedUserId = ((_data$matchedUser3 = data.matchedUser) === null || _data$matchedUser3 === void 0 ? void 0 : _data$matchedUser3.id) || ((_data$matchedUser4 = data.matchedUser) === null || _data$matchedUser4 === void 0 ? void 0 : _data$matchedUser4.socketId);\n      if (matchedUserId) {\n        const pc = createPeerConnection(matchedUserId);\n        peerConnections.current[matchedUserId] = pc;\n        const dc = pc.createDataChannel('chat');\n        dataChannels.current[matchedUserId] = dc;\n        setupDataChannel(dc);\n      }\n    });\n    socketRef.current.on('user-joined', payload => {\n      const pc = createPeerConnection(payload.callerID);\n      peerConnections.current[payload.callerID] = pc;\n      const dc = pc.createDataChannel('chat');\n      dataChannels.current[payload.callerID] = dc;\n      setupDataChannel(dc);\n      pc.createOffer().then(offer => {\n        return pc.setLocalDescription(offer);\n      }).then(() => {\n        socketRef.current.emit('offer', {\n          target: payload.callerID,\n          caller: socketRef.current.id,\n          sdp: pc.localDescription\n        });\n      }).catch(error => {\n        console.error('Error creating offer.', error);\n      });\n    });\n    socketRef.current.on('offer', payload => {\n      const pc = peerConnections.current[payload.caller];\n      pc.setRemoteDescription(payload.sdp).then(() => {\n        return pc.createAnswer();\n      }).then(answer => {\n        return pc.setLocalDescription(answer);\n      }).then(() => {\n        socketRef.current.emit('answer', {\n          target: payload.caller,\n          caller: socketRef.current.id,\n          sdp: pc.localDescription\n        });\n      }).catch(error => {\n        console.error('Error creating answer.', error);\n      });\n    });\n    socketRef.current.on('answer', payload => {\n      const pc = peerConnections.current[payload.caller];\n      pc.setRemoteDescription(payload.sdp).catch(error => {\n        console.error('Error setting remote description.', error);\n      });\n    });\n    socketRef.current.on('ice-candidate', payload => {\n      const pc = peerConnections.current[payload.caller];\n      pc.addIceCandidate(new RTCIceCandidate(payload.candidate)).catch(error => {\n        console.error('Error adding ICE candidate.', error);\n      });\n    });\n    socketRef.current.on('user-left', userID => {\n      if (peerConnections.current[userID]) {\n        peerConnections.current[userID].close();\n      }\n      delete peerConnections.current[userID];\n      delete dataChannels.current[userID];\n      setPeers(prevPeers => {\n        const newPeers = {\n          ...prevPeers\n        };\n        delete newPeers[userID];\n        return newPeers;\n      });\n      setRemoteStreams(prevStreams => {\n        const newStreams = {\n          ...prevStreams\n        };\n        delete newStreams[userID];\n        return newStreams;\n      });\n    });\n    socketRef.current.on('call-ended', () => {\n      setCallEnded(true);\n    });\n    return () => {\n      socketRef.current.disconnect();\n      localStream === null || localStream === void 0 ? void 0 : localStream.getTracks().forEach(track => track.stop());\n      Object.values(peerConnections.current).forEach(pc => pc.close());\n      socketRef.current.off('call-ended');\n    };\n  }, [roomId]);\n  const createPeerConnection = userID => {\n    const pc = new RTCPeerConnection({\n      iceServers: [{\n        urls: 'stun:stun.l.google.com:19302'\n      }, {\n        urls: 'stun:stun1.l.google.com:19302'\n      }]\n    });\n    pc.onicecandidate = event => {\n      if (event.candidate) {\n        socketRef.current.emit('ice-candidate', {\n          target: userID,\n          caller: socketRef.current.id,\n          candidate: event.candidate\n        });\n      }\n    };\n    pc.ontrack = event => {\n      setRemoteStreams(prevStreams => ({\n        ...prevStreams,\n        [userID]: event.streams[0]\n      }));\n    };\n    pc.ondatachannel = event => {\n      const dc = event.channel;\n      dataChannels.current[userID] = dc;\n      setupDataChannel(dc);\n    };\n    if (localStream) {\n      localStream.getTracks().forEach(track => {\n        pc.addTrack(track, localStream);\n      });\n    }\n    return pc;\n  };\n  const setupDataChannel = dc => {\n    dc.onopen = () => {\n      console.log('Data channel is open');\n    };\n    dc.onmessage = event => {\n      // Messages are now handled in ChatRoom component via socket\n      console.log('Data channel message received:', event.data);\n    };\n  };\n  return {\n    socketRef,\n    localStream,\n    remoteStreams,\n    callEnded,\n    setCallEnded\n  };\n};\n_s(useWebRTC, \"eXif5G04I8YNz/sXnV4p8aJu6Eg=\");\nexport default useWebRTC;","map":{"version":3,"names":["useRef","useEffect","useState","useCallback","io","useWebRTC","roomId","user","_s","peers","setPeers","localStream","setLocalStream","remoteStreams","setRemoteStreams","callEnded","setCallEnded","socketRef","peerConnections","dataChannels","current","navigator","mediaDevices","getUserMedia","video","audio","then","stream","emit","catch","error","console","on","data","_data$matchedUser","_data$matchedUser2","matchedUserId","matchedUser","id","socketId","pc","createPeerConnection","dc","createDataChannel","setupDataChannel","_data$matchedUser3","_data$matchedUser4","payload","callerID","createOffer","offer","setLocalDescription","target","caller","sdp","localDescription","setRemoteDescription","createAnswer","answer","addIceCandidate","RTCIceCandidate","candidate","userID","close","prevPeers","newPeers","prevStreams","newStreams","disconnect","getTracks","forEach","track","stop","Object","values","off","RTCPeerConnection","iceServers","urls","onicecandidate","event","ontrack","streams","ondatachannel","channel","addTrack","onopen","log","onmessage"],"sources":["D:/WORKING WEBSITES/VIDEO CHAT/frontend/src/components/useWebRTC.js"],"sourcesContent":["import { useRef, useEffect, useState, useCallback } from 'react';\nimport io from 'socket.io-client';\n\nconst useWebRTC = (roomId, user) => {\n  const [peers, setPeers] = useState({});\n  const [localStream, setLocalStream] = useState(null);\n  const [remoteStreams, setRemoteStreams] = useState({});\n  const [callEnded, setCallEnded] = useState(false);\n  const socketRef = useRef();\n  const peerConnections = useRef({});\n  const dataChannels = useRef({});\n\n  useEffect(() => {\n    socketRef.current = io('http://localhost:5000'); // Replace with your signaling server URL\n\n    navigator.mediaDevices.getUserMedia({ video: true, audio: true })\n      .then(stream => {\n        setLocalStream(stream);\n        // Emit user-join instead of join-room to match server\n        socketRef.current.emit('user-join', { roomId, user });\n      })\n      .catch(error => {\n        console.error('Error accessing media devices.', error);\n      });\n\n    // Listen for match-found instead of all-users\n    socketRef.current.on('match-found', (data) => {\n      // When match is found, create peer connection for the matched user\n      const matchedUserId = data.matchedUser?.id || data.matchedUser?.socketId;\n      if (matchedUserId) {\n        const pc = createPeerConnection(matchedUserId);\n        peerConnections.current[matchedUserId] = pc;\n        const dc = pc.createDataChannel('chat');\n        dataChannels.current[matchedUserId] = dc;\n        setupDataChannel(dc);\n      }\n    });\n\n    // Listen for skip-matched (when user skips and gets a new match)\n    socketRef.current.on('skip-matched', (data) => {\n      // When skip match is found, create peer connection for the new matched user\n      const matchedUserId = data.matchedUser?.id || data.matchedUser?.socketId;\n      if (matchedUserId) {\n        const pc = createPeerConnection(matchedUserId);\n        peerConnections.current[matchedUserId] = pc;\n        const dc = pc.createDataChannel('chat');\n        dataChannels.current[matchedUserId] = dc;\n        setupDataChannel(dc);\n      }\n    });\n\n    socketRef.current.on('user-joined', payload => {\n      const pc = createPeerConnection(payload.callerID);\n      peerConnections.current[payload.callerID] = pc;\n      const dc = pc.createDataChannel('chat');\n      dataChannels.current[payload.callerID] = dc;\n      setupDataChannel(dc);\n      pc.createOffer()\n        .then(offer => {\n          return pc.setLocalDescription(offer);\n        })\n        .then(() => {\n          socketRef.current.emit('offer', {\n            target: payload.callerID,\n            caller: socketRef.current.id,\n            sdp: pc.localDescription,\n          });\n        })\n        .catch(error => {\n          console.error('Error creating offer.', error);\n        });\n    });\n\n    socketRef.current.on('offer', payload => {\n      const pc = peerConnections.current[payload.caller];\n      pc.setRemoteDescription(payload.sdp)\n        .then(() => {\n          return pc.createAnswer();\n        })\n        .then(answer => {\n          return pc.setLocalDescription(answer);\n        })\n        .then(() => {\n          socketRef.current.emit('answer', {\n            target: payload.caller,\n            caller: socketRef.current.id,\n            sdp: pc.localDescription,\n          });\n        })\n        .catch(error => {\n          console.error('Error creating answer.', error);\n        });\n    });\n\n    socketRef.current.on('answer', payload => {\n      const pc = peerConnections.current[payload.caller];\n      pc.setRemoteDescription(payload.sdp).catch(error => {\n        console.error('Error setting remote description.', error);\n      });\n    });\n\n    socketRef.current.on('ice-candidate', payload => {\n      const pc = peerConnections.current[payload.caller];\n      pc.addIceCandidate(new RTCIceCandidate(payload.candidate)).catch(error => {\n        console.error('Error adding ICE candidate.', error);\n      });\n    });\n\n    socketRef.current.on('user-left', userID => {\n      if (peerConnections.current[userID]) {\n        peerConnections.current[userID].close();\n      }\n      delete peerConnections.current[userID];\n      delete dataChannels.current[userID];\n      setPeers(prevPeers => {\n        const newPeers = { ...prevPeers };\n        delete newPeers[userID];\n        return newPeers;\n      });\n      setRemoteStreams(prevStreams => {\n        const newStreams = { ...prevStreams };\n        delete newStreams[userID];\n        return newStreams;\n      });\n    });\n\n    socketRef.current.on('call-ended', () => {\n      setCallEnded(true);\n    });\n\n    return () => {\n      socketRef.current.disconnect();\n      localStream?.getTracks().forEach(track => track.stop());\n      Object.values(peerConnections.current).forEach(pc => pc.close());\n      socketRef.current.off('call-ended');\n    };\n  }, [roomId]);\n\n  const createPeerConnection = (userID) => {\n    const pc = new RTCPeerConnection({\n      iceServers: [\n        { urls: 'stun:stun.l.google.com:19302' },\n        { urls: 'stun:stun1.l.google.com:19302' },\n      ],\n    });\n\n    pc.onicecandidate = event => {\n      if (event.candidate) {\n        socketRef.current.emit('ice-candidate', {\n          target: userID,\n          caller: socketRef.current.id,\n          candidate: event.candidate,\n        });\n      }\n    };\n\n    pc.ontrack = event => {\n      setRemoteStreams(prevStreams => ({\n        ...prevStreams,\n        [userID]: event.streams[0],\n      }));\n    };\n\n    pc.ondatachannel = event => {\n      const dc = event.channel;\n      dataChannels.current[userID] = dc;\n      setupDataChannel(dc);\n    };\n\n    if (localStream) {\n      localStream.getTracks().forEach(track => {\n        pc.addTrack(track, localStream);\n      });\n    }\n\n    return pc;\n  };\n\n  const setupDataChannel = (dc) => {\n    dc.onopen = () => {\n      console.log('Data channel is open');\n    };\n\n    dc.onmessage = event => {\n      // Messages are now handled in ChatRoom component via socket\n      console.log('Data channel message received:', event.data);\n    };\n  };\n\n  return { socketRef, localStream, remoteStreams, callEnded, setCallEnded };\n};\n\nexport default useWebRTC;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}